<script>
const text = document.getElementById("text");
const carry = document.getElementById("carry");
const cake = document.getElementById("cakeSolo");
const age18 = document.getElementById("age18");
const card = document.getElementById("card");
const music = document.getElementById("music");

let stage = 0;
let lock = true;
let started = false;

/* ====== GÄ°RÄ°Å YAZILARI ====== */
const intro = [
  "Koca AyÄ±dan Sana Bir SÃ¼rpriz Var ğŸ",
  "SÃ¼rprizi Ã¶ÄŸrenmek istiyorsan",
  "ekrana dokun"
];

intro.forEach((l, i) => {
  setTimeout(() => {
    const d = document.createElement("div");
    d.className = "paper";
    d.innerHTML = l;
    text.appendChild(d);
    if (i === intro.length - 1) lock = false; // SADECE SON YAZIDAN SONRA
  }, 1200 * i);
});

/* ====== TIKLAMA ====== */
document.body.addEventListener("click", () => {
  if (lock) return;

  if (!started) {
    started = true;
    music.play().catch(()=>{});
  }

  /* 1ï¸âƒ£ GÄ°RÄ°ÅTEN PASTAYA */
  if (stage === 0) {
    stage = 1;
    lock = true;
    document.body.className = "cake-bg";
    text.innerHTML = "";
    carry.style.display = "flex";

    setTimeout(() => {
      carry.style.display = "none";
      cake.style.display = "block";
      text.innerHTML = "PastayÄ± Ã¼flemeden Ã¶nce dilek tut";
      setTimeout(() => count(8), 1200);
    }, 3600);
  }

  /* 3ï¸âƒ£ ÃœFLEME */
  else if (stage === 3) {
    stage = 4;
    lock = true;

    // ğŸ”¥ SÃ–NME
    age18.style.opacity = "0.2";
    cake.style.filter = "grayscale(100%)";

    // ğŸ± pastayÄ± alÄ±p gitsin
    setTimeout(() => {
      carry.style.display = "flex";
    }, 1200);

    setTimeout(() => {
      carry.style.display = "none";
      cake.style.display = "none";
      text.innerHTML = "";
      document.body.style.background =
        "linear-gradient(135deg,#ffd1dc,#ffb7c5,#ffe6ee)";
    }, 2600);

    setTimeout(() => {
      card.style.display = "block";
      stage = 6;
      lock = false;
    }, 3600);
  }

  /* 6ï¸âƒ£ MEKTUP */
  else if (stage === 6) {
    stage = 7;
    lock = true;
    card.style.display = "none";
    final();
  }
});

/* ====== GERÄ° SAYIM ====== */
function count(n) {
  stage = 2;
  text.innerHTML =
    "PastayÄ± Ã¼flemeden Ã¶nce dilek tut<br><span class='count'>" + n + "</span>";

  if (n > 1) {
    setTimeout(() => count(n - 1), 1200);
  } else {
    setTimeout(() => {
      text.innerHTML = "PastayÄ± Ã¼flemek iÃ§in ekrana dokun";
      stage = 3;
      lock = false;
    }, 1200);
  }
}

/* ====== FÄ°NAL ====== */
function final() {
  const lines = [
    "<img src='biz.jpg' style='width:240px;border-radius:18px;margin-bottom:12px;'>",
    "DoÄŸum GÃ¼nÃ¼n Kutlu Olsun AÅŸkÄ±m ğŸ’š",
    "Ä°yi ki VarsÄ±n",
    "Ä°yi ki Benimlesin",
    "Birlikte SaÄŸlÄ±kla ve Mutlulukla GeÃ§ecek Nice Senelerimiz Olsun ğŸ¤",
    "<span class='signature'>Kaanâ€™dan Ä°clale</span>"
  ];
  let i = 0;

  (function write() {
    if (i >= lines.length) return;
    const d = document.createElement("div");
    d.className = "paper";
    d.innerHTML = lines[i++];
    text.appendChild(d);
    setTimeout(write, 1100);
  })();
}
</script>
